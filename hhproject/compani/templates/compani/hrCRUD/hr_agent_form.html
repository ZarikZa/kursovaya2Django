{% extends "base.html" %}
{% load static %}

{% block title %}{{ title }} - CareerHub{% endblock %}

{% block content %}
<div class="edit-profile-section">
    <div class="edit-profile-container">
        <div class="edit-profile-card">
            <div class="edit-profile-header">
                <h1>{{ title }}</h1>
                <p>{% if title == 'Создать HR-агента' %}Добавление нового сотрудника{% else %}Редактирование данных HR-агента{% endif %}</p>
            </div>

            {% if messages %}
            <div class="messages">
                {% for message in messages %}
                <div class="alert {% if message.tags == 'error' %}alert-error{% else %}alert-success{% endif %}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <form method="post" class="profile-form">
                {% csrf_token %}
                
                <div class="form-section" style="--index: 1">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        Основная информация
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.first_name.id_for_label }}">Имя *</label>
                            {{ form.first_name }}
                            {% if form.first_name.errors %}
                                <div class="error-message">{{ form.first_name.errors.0 }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.last_name.id_for_label }}">Фамилия *</label>
                            {{ form.last_name }}
                            {% if form.last_name.errors %}
                                <div class="error-message">{{ form.last_name.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="form-section" style="--index: 2">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                        Контактная информация
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.email.id_for_label }}">Email *</label>
                            {{ form.email }}
                            {% if form.email.errors %}
                                <div class="error-message">{{ form.email.errors.0 }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.phone.id_for_label }}">Телефон *</label>
                            {{ form.phone }}
                            {% if form.phone.errors %}
                                <div class="error-message">{{ form.phone.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                {% if title == 'Создать HR-агента' %}
                <div class="form-section" style="--index: 3">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M15 7a2 2 0 0 1 2 2m4 0a6 6 0 0 1-7.743 5.743L11 17H9v2H7v2H4a1 1 0 0 1-1-1v-2.586a1 1 0 0 1 .293-.707l5.964-5.964A6 6 0 1 1 21 9z"></path>
                        </svg>
                        Безопасность
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.password1.id_for_label }}">Пароль *</label>
                            {{ form.password1 }}
                            {% if form.password1.errors %}
                                <div class="error-message">{{ form.password1.errors.0 }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.password2.id_for_label }}">Подтверждение пароля *</label>
                            {{ form.password2 }}
                            {% if form.password2.errors %}
                                <div class="error-message">{{ form.password2.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}

                <div class="form-actions">
                    <button type="submit" class="btn btn-save">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                            <polyline points="17 21 17 13 7 13 7 21"></polyline>
                            <polyline points="7 3 7 8 15 8"></polyline>
                        </svg>
                        {% if title == 'Создать HR-агента' %}Создать{% else %}Сохранить{% endif %}
                    </button>
                    <a href="{% url 'hr_agents_list' %}" class="btn btn-cancel">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5"></path>
                            <path d="M12 19l-7-7 7-7"></path>
                        </svg>
                        Отмена
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}