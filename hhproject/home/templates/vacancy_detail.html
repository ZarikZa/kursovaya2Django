{% extends 'base.html' %}
{% load static %}

{% block title %}{{ vacancy.position }} - {{ vacancy.company.name }} - CareerHub{% endblock %}

{% block content %}
<div class="vacancy-detail-section">
    <div class="container">
        <nav class="breadcrumb">
            <div class="breadcrumb-item">
                <a href="{% url 'home_page' %}">–ì–ª–∞–≤–Ω–∞—è</a>
            </div>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <div class="breadcrumb-item">
                <a href="{% url 'vakansi_page' %}">–í–∞–∫–∞–Ω—Å–∏–∏</a>
            </div>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <div class="breadcrumb-item active">
                {{ vacancy.position }}
            </div>
        </nav>

        <div class="vacancy-hero">
            <div class="vacancy-header">
                <div class="vacancy-title-section">
                    <h1 class="vacancy-title">{{ vacancy.position }}</h1>
                    <div class="company-info">
                        <div class="company-avatar">
                            {{ vacancy.company.name|first }}
                        </div>
                        <div class="company-details">
                            <h3>{{ vacancy.company.name }}</h3>
                            <div class="company-meta">
                                <span>üìç {{ vacancy.city }}</span>
                                <span>‚Ä¢</span>
                                <span>{{ vacancy.work_conditions.work_conditions_name }}</span>
                                {% if vacancy.category %}
                                <span>‚Ä¢</span>
                                <span class="vacancy-category {{ vacancy.category|lower }}">{{ vacancy.category }}</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="vacancy-actions">
                    {% if user.is_authenticated and user.user_type == 'applicant' %}
                        {% if has_response %}
                            <button class="btn btn-success" disabled>
                                <span>‚úÖ</span>
                                –û—Ç–∫–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
                            </button>
                        {% else %}
                            <a href="{% url 'apply_to_vacancy' vacancy.id %}" class="btn btn-primary">
                                <span>üì®</span>
                                –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è
                            </a>
                        {% endif %}
                        
                        {% if is_favorite %}
                            <a href="{% url 'remove_from_favorites' vacancy.id %}" class="btn btn-outline">
                                <span>‚ù§Ô∏è</span>
                                –í –∏–∑–±—Ä–∞–Ω–Ω–æ–º
                            </a>
                        {% else %}
                            <a href="{% url 'add_to_favorites' vacancy.id %}" class="btn btn-outline">
                                <span>ü§ç</span>
                                –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
                            </a>
                        {% endif %}

                        <div class="complaint-action">
                                <a href="{% url 'create_complaint' vacancy.id %}" class="btn btn-report">
                                    <span>‚ö†Ô∏è</span>
                                    –ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è
                                </a>
                        </div>

                    {% elif not user.is_authenticated %}
                        <a href="{% url 'login_user' %}?next={{ request.path }}" class="btn btn-primary">
                            <span>üì®</span>
                            –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è
                        </a>
                        <a href="{% url 'login_user' %}?next={{ request.path }}" class="btn btn-outline">
                            <span>ü§ç</span>
                            –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
                        </a>
                    {% endif %}
                </div>
            </div>

            <div class="vacancy-details-grid">
                <div class="detail-card">
                    <div class="detail-label">–ó–∞—Ä–ø–ª–∞—Ç–∞</div>
                    <div class="detail-value salary">{{ vacancy.salary_min }} - {{ vacancy.salary_max }} ‚ÇΩ</div>
                </div>
                <div class="detail-card">
                    <div class="detail-label">–¢–∏–ø –∑–∞–Ω—è—Ç–æ—Å—Ç–∏</div>
                    <div class="detail-value">{{ vacancy.work_conditions.work_conditions_name }}</div>
                </div>
                <div class="detail-card">
                    <div class="detail-label">–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</div>
                    <div class="detail-value">{{ vacancy.experience|default:'–ù–µ —É–∫–∞–∑–∞–Ω' }}</div>
                </div>
                <div class="detail-card">
                    <div class="detail-label">–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</div>
                    <div class="detail-value">{{ vacancy.created_date|date:"d.m.Y" }}</div>
                </div>
            </div>

           
        </div>

        <div class="content-grid">
            <div>
                <div class="content-section">
                    <div class="section-header">
                        <div class="section-icon">üìã</div>
                        <h3 class="section-title">–û–ø–∏—Å–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏</h3>
                    </div>
                    <div class="content-text">
                        {{ vacancy.description|linebreaks }}
                    </div>
                </div>

                <div class="content-section">
                    <div class="section-header">
                        <div class="section-icon">üéØ</div>
                        <h3 class="section-title">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è</h3>
                    </div>
                    <div class="content-text">
                        {{ vacancy.requirements|linebreaks }}
                    </div>
                </div>
                
               <div class="content-section">
                    <div class="section-header">
                        <div class="section-icon">üíº</div>
                        <h3 class="section-title">–£—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã</h3>
                    </div>
                    <div class="content-text">
                        {% if vacancy.work_conditions_details %}
                            {{ vacancy.work_conditions_details|linebreaks }}
                        {% else %}
                            <p>–ù–µ —É–∫–∞–∑–∞–Ω—ã</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div>
                <div class="company-card">
                    <div class="section-header">
                        <div class="section-icon">üè¢</div>
                        <h3 class="section-title">–û –∫–æ–º–ø–∞–Ω–∏–∏</h3>
                    </div>
                    <div class="content-text">
                        {{ vacancy.company.description|default:'–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏' }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}